/*@license For license information please refer to blossom-lodging-search-form.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8665],{53636:function(e,t,n){n.r(t),n.d(t,{LodgingSearchForm:function(){return C},default:function(){return y}});var o=n(96540),r=n(31370),i=n(50224),a=n(94220),l=n(33222),c=n(68174),u=n(49784),s=n(63971),f=n(68136),d=n(58246);const p={0:"SYSTEM",10:"ENTRY",20:"SEARCH_RESULTS",30:"DETAILS",40:"CHECKOUT",50:"CHECKOUT_ERROR",60:"PAYMENT_ERROR",70:"CONFIRMATION",80:"POST_BOOKING",90:"USER",500:"FEATURES"};var g=n(85625),O=n(86088);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function _(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _(this,n)}}var v=function(e){b(n,e);var t=h(n);function n(){return m(this,n),t.apply(this,arguments)}return n}(n(39753).H);const C=(0,i.L)("context","page")((0,r.observer)((e=>{var t,n,r;const{templateComponent:i,context:m,page:E}=e,{registerTarget:b}=(0,s.OK)(),{prefetchSRPAssets:_}=(0,d.Y)(O.B.LODGING_SRP),S=!(null===(t=null==m?void 0:m.deviceInformation)||void 0===t?void 0:t.mobile)&&!(null===(n=null==m?void 0:m.deviceInformation)||void 0===n?void 0:n.tablet),{metadata:h}=i,{id:C}=h,y=b("lodgingSearchFormSection"),{sticky:R,autoOpenCalendar:L,prefillDestination:T,prefillPropertyName:I,hideFlexibleDates:A,fieldToAutoSubmitOnChange:P}=i.config,{exposure:F}=(0,g.useExperiment)("Progressing_users_to_SRP_upon_dates_selection",S&&"date-field"===P),N=()=>{var e;return(null===(e=null==m?void 0:m.searchContext)||void 0===e?void 0:e.location)?m.searchContext.location.id.toString():null},D=(e=>{if(!e||!e.pageId)return{pageId:"",lineOfBusiness:"",funnelLocation:""};const[t,n,o]=e.pageId.split(",").map((e=>e.trim()));return{pageId:t,lineOfBusiness:n,funnelLocation:o}})(E);var j;const x={};"DETAILS"===(j=D.funnelLocation,p[j]||"ENTRY")?x.pinnedPropertyId=N():x.regionId=N();const w={propertySearchCriteriaInput:{primary:{destination:x,rooms:[]}}},B=null===(r=null==m?void 0:m.deviceInformation)||void 0===r?void 0:r.mobile,[H,U]=o.useState(!B&&(null!=L&&L));(0,u._H)("AVAILABILITY_CALL_TO_ACTION_BUTTON_CLICK",v,{onSuccess:()=>U(!0)});const{triggerPreloadingSearch:Y}=(0,f.tF)(),K={includeFlexibleCalendarContent:!A,includeFlexibleDatesContent:!A},k=o.useCallback(((e,t,n)=>{Y(e,t,n),_(e)}),[_,Y]),M=Object.assign(Object.assign({inputs:T?w:{},onFieldChange:k,enableReflection:!0,redirectToSearchResultOnSubmit:!0,sticky:R,autoOpenCalendar:L,features:I?["PREFILL_PROPERTY_NAME"]:null,showCalendar:H,toggleCalendar:U,updateLatLongOnSelection:void 0},K),{autoSubmitOnFieldChangeConfig:1===F.bucket?{onDateFieldChange:"date-field"===P}:void 0,pageLocation:l.Hb.ENTRY}),Z=Object.assign(Object.assign({},M),{autoSubmitOnFieldChangeConfig:{onDateFieldChange:"date-field"===P}});return o.createElement(a.b,{margin:{block:"four"}},o.createElement("section",{id:C,"data-testid":"lodging-search-form"},o.createElement(c.LM,null,o.createElement(c.NP,null,o.createElement("div",{id:"lodgingSearchFormSection","data-testid":"lodgingSearchFormSection",ref:y},o.createElement(l.Z0,Object.assign({},Z)))),R?o.createElement(c.rw,null,o.createElement(l.Z0,Object.assign({},M))):o.createElement(c.rw,null,o.createElement("div",null,o.createElement(l.Z0,Object.assign({},Z)))),o.createElement(c.TD,null,o.createElement(l.Z0,Object.assign({},M))))))})));C.displayName="LodgingSearchForm";var y=C}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/lotus-home-ui/blossom-lodging-search-form.b889ac20d9ad735c2b00.js.map